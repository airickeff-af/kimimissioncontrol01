<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="theme-color" content="#2d1b4e">
    <title>Pixel Office | Mission Control</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=VT323&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Inter', sans-serif;
            background: #0a0a0f;
            color: #e0e0e0;
            min-height: 100vh;
        }
        .header {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            padding: 1rem 2rem;
            border-bottom: 2px solid #00d4ff;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }
        .logo { 
            font-family: 'Press Start 2P', cursive;
            font-size: 0.9rem; 
            color: #00d4ff; 
        }
        .nav { display: flex; gap: 0.5rem; flex-wrap: wrap; align-items: center; }
        .nav a {
            color: #888;
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            transition: all 0.2s;
            font-size: 0.85rem;
        }
        .nav a:hover, .nav a.active { color: #00d4ff; background: rgba(0,212,255,0.1); }
        .refresh-btn {
            background: rgba(0, 212, 255, 0.2);
            border: 1px solid #00d4ff;
            color: #00d4ff;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .refresh-btn:hover { background: rgba(0, 212, 255, 0.3); }
        .refresh-btn.spinning { animation: spin 1s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }
        .container { max-width: 1400px; margin: 0 auto; padding: 2rem; }
        h1 { color: #00d4ff; margin-bottom: 1rem; font-family: 'Press Start 2P', cursive; font-size: 1.2rem; }
        
        .office-container {
            background: linear-gradient(135deg, #1a1a2e, #0f0f1a);
            border: 1px solid #333;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
        }
        
        /* Canvas for Pixel Office */
        #pixelCanvas {
            width: 100%;
            height: 500px;
            background: linear-gradient(180deg, #1a1a2e 0%, #0d1117 100%);
            border: 2px solid #333;
            border-radius: 8px;
            image-rendering: pixelated;
        }
        
        /* Hierarchy Table */
        .hierarchy-section {
            margin-top: 2rem;
        }
        .hierarchy-title {
            font-family: 'Press Start 2P', cursive;
            font-size: 0.9rem;
            color: #00d4ff;
            margin-bottom: 1rem;
        }
        .hierarchy-table {
            width: 100%;
            border-collapse: collapse;
            background: rgba(0,0,0,0.3);
            border-radius: 8px;
            overflow: hidden;
        }
        .hierarchy-table th {
            background: rgba(0,212,255,0.1);
            padding: 1rem;
            text-align: left;
            font-weight: 600;
            color: #00d4ff;
            border-bottom: 1px solid #333;
        }
        .hierarchy-table td {
            padding: 0.75rem 1rem;
            border-bottom: 1px solid #222;
        }
        .hierarchy-table tr:hover {
            background: rgba(0,212,255,0.05);
        }
        .agent-avatar {
            width: 32px;
            height: 32px;
            border-radius: 4px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            margin-right: 0.5rem;
        }
        .status-badge {
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 500;
        }
        .status-active { background: rgba(0,255,136,0.2); color: #00ff88; }
        .status-busy { background: rgba(255,193,7,0.2); color: #ffc107; }
        .status-idle { background: rgba(158,158,158,0.2); color: #9e9e9e; }
        
        .level-commander { border-left: 4px solid #ffd700; }
        .level-lead { border-left: 4px solid #00d4ff; }
        .level-specialist { border-left: 4px solid #9c27b0; }
        .level-support { border-left: 4px solid #4caf50; }
        
        /* Activity Bars */
        .activity-bar {
            height: 4px;
            background: #333;
            border-radius: 2px;
            overflow: hidden;
            width: 100px;
        }
        .activity-fill {
            height: 100%;
            background: linear-gradient(90deg, #00d4ff, #00ff88);
            border-radius: 2px;
            transition: width 0.3s;
        }
        
        /* Agent Info */
        .agent-info {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .agent-name {
            font-weight: 500;
        }
        .agent-role {
            font-size: 0.8rem;
            color: #888;
        }
        
        /* Clickable rows */
        .agent-row {
            cursor: pointer;
            transition: all 0.2s;
        }
        .agent-row:hover {
            background: rgba(0,212,255,0.1);
        }
        
        @media (max-width: 768px) {
            .header { padding: 1rem; }
            .nav { width: 100%; justify-content: center; }
            .container { padding: 1rem; }
            #pixelCanvas { height: 300px; }
            .hierarchy-table { font-size: 0.85rem; }
            .hierarchy-table th, .hierarchy-table td { padding: 0.5rem; }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="logo">üéÆ PIXEL OFFICE</div>
        <nav class="nav">
            <a href="index.html">üè† HQ</a>
            <a href="office.html">üè¢ Office</a>
            <a href="pixel-office.html" class="active">üéÆ Pixel</a>
            <a href="agents.html">üë• Agents</a>
            <a href="projects.html">üöÄ Projects</a>
            <a href="deals.html">üíº Deals</a>
            <a href="tokens.html">ü™ô Tokens</a>
            <a href="task-board.html">üìã Tasks</a>
            <a href="data.html">üìÅ Data</a>
        </nav>
        <button class="refresh-btn" onclick="refreshData()">
            <span>üîÑ</span> Refresh
        </button>
    </header>

    <div class="container">
        <h1>üè¢ ISOMETRIC PIXEL OFFICE</h1>
        
        <div class="office-container">
            <canvas id="pixelCanvas"></canvas>
            
            <!-- Hierarchy Table -->
            <div class="hierarchy-section">
                <div class="hierarchy-title">üë• AGENT HIERARCHY</div>
                <table class="hierarchy-table" id="hierarchyTable">
                    <thead>
                        <tr>
                            <th>Agent</th>
                            <th>Role</th>
                            <th>Team</th>
                            <th>Status</th>
                            <th>Current Task</th>
                            <th>Activity</th>
                        </tr>
                    </thead>
                    <tbody id="hierarchyBody">
                        <!-- Populated by JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        // Agent Data with Hierarchy
        const agents = [
            { id: 'ericf', name: 'EricF', role: 'Commander', team: 'Executive', status: 'active', task: 'Strategic oversight', activity: 85, level: 'commander', emoji: 'üëë' },
            { id: 'nexus', name: 'Nexus', role: 'AI Lead / Orchestrator', team: 'Executive', status: 'active', task: 'System coordination', activity: 92, level: 'lead', emoji: 'ü§ñ' },
            { id: 'codemaster', name: 'CodeMaster', role: 'Dev Team Lead', team: 'Development', status: 'active', task: 'API architecture', activity: 78, level: 'lead', emoji: 'üíª' },
            { id: 'code1', name: 'Code-1', role: 'Backend Specialist', team: 'Development', status: 'busy', task: 'Database optimization', activity: 65, level: 'specialist', emoji: '‚öôÔ∏è' },
            { id: 'code2', name: 'Code-2', role: 'API Developer', team: 'Development', status: 'active', task: 'Endpoint development', activity: 80, level: 'specialist', emoji: 'üîå' },
            { id: 'code3', name: 'Code-3', role: 'Integration Dev', team: 'Development', status: 'idle', task: 'Waiting for assignment', activity: 20, level: 'specialist', emoji: 'üîß' },
            { id: 'forge', name: 'Forge', role: 'Design Team Lead', team: 'Design', status: 'active', task: 'UI/UX improvements', activity: 88, level: 'lead', emoji: 'üé®' },
            { id: 'forge2', name: 'Forge-2', role: 'Frontend Dev', team: 'Design', status: 'busy', task: 'Component library', activity: 72, level: 'specialist', emoji: 'üñåÔ∏è' },
            { id: 'forge3', name: 'Forge-3', role: 'Visual Designer', team: 'Design', status: 'active', task: 'Icon design', activity: 60, level: 'specialist', emoji: '‚ú®' },
            { id: 'pixel', name: 'Pixel', role: 'Pixel Artist', team: 'Design', status: 'active', task: 'Sprite creation', activity: 75, level: 'specialist', emoji: 'üé≠' },
            { id: 'glasses', name: 'Glasses', role: 'Research Lead', team: 'Research', status: 'active', task: 'Market analysis', activity: 82, level: 'lead', emoji: 'üîç' },
            { id: 'scout', name: 'Scout', role: 'Intelligence Analyst', team: 'Research', status: 'busy', task: 'Lead research', activity: 90, level: 'specialist', emoji: 'üïµÔ∏è' },
            { id: 'sentry', name: 'Sentry', role: 'Operations', team: 'Operations', status: 'active', task: 'System monitoring', activity: 70, level: 'support', emoji: 'üõ°Ô∏è' },
            { id: 'cipher', name: 'Cipher', role: 'Security', team: 'Operations', status: 'active', task: 'Security audit', activity: 55, level: 'support', emoji: 'üîê' },
            { id: 'quill', name: 'Quill', role: 'Content Lead', team: 'Content', status: 'active', task: 'Documentation', activity: 68, level: 'lead', emoji: 'üìù' },
            { id: 'larry', name: 'Larry', role: 'Copywriter', team: 'Content', status: 'idle', task: 'Waiting for brief', activity: 15, level: 'specialist', emoji: 'üìÑ' },
            { id: 'gary', name: 'Gary', role: 'Marketing Lead', team: 'Marketing', status: 'active', task: 'Campaign planning', activity: 62, level: 'lead', emoji: 'üì¢' },
            { id: 'coldcall', name: 'ColdCall', role: 'Outreach', team: 'Marketing', status: 'busy', task: 'Email sequences', activity: 85, level: 'specialist', emoji: 'üìû' },
            { id: 'dealflow', name: 'DealFlow', role: 'CRM Manager', team: 'Marketing', status: 'active', task: 'Lead management', activity: 78, level: 'specialist', emoji: 'üíº' },
            { id: 'pie', name: 'PIE', role: 'Intelligence Engine', team: 'Research', status: 'active', task: 'Predictive analysis', activity: 95, level: 'specialist', emoji: 'üß†' },
            { id: 'audit1', name: 'Audit-1', role: 'Quality Auditor', team: 'Audit', status: 'active', task: 'Code review', activity: 45, level: 'support', emoji: '‚úÖ' },
            { id: 'audit2', name: 'Audit-2', role: 'Quality Auditor', team: 'Audit', status: 'idle', task: 'Waiting for reviews', activity: 10, level: 'support', emoji: '‚úÖ' }
        ];

        // Populate Hierarchy Table
        function populateHierarchy() {
            const tbody = document.getElementById('hierarchyBody');
            tbody.innerHTML = agents.map(agent => `
                <tr class="agent-row level-${agent.level}" onclick="focusAgent('${agent.id}')">
                    <td>
                        <div class="agent-info">
                            <span class="agent-avatar">${agent.emoji}</span>
                            <span class="agent-name">${agent.name}</span>
                        </div>
                    </td>
                    <td>${agent.role}</td>
                    <td>${agent.team}</td>
                    <td><span class="status-badge status-${agent.status}">${agent.status.toUpperCase()}</span></td>
                    <td>${agent.task}</td>
                    <td>
                        <div class="activity-bar">
                            <div class="activity-fill" style="width: ${agent.activity}%"></div>
                        </div>
                    </td>
                </tr>
            `).join('');
        }

        // Focus on agent in canvas
        function focusAgent(agentId) {
            console.log(`[Pixel Office] Focusing on agent: ${agentId}`);
            // Scroll to canvas
            document.getElementById('pixelCanvas').scrollIntoView({ behavior: 'smooth' });
            // Highlight agent in canvas (would be implemented with full canvas rendering)
        }

        // Refresh data
        function refreshData() {
            const btn = document.querySelector('.refresh-btn');
            btn.classList.add('spinning');
            
            // Simulate data refresh
            setTimeout(() => {
                populateHierarchy();
                btn.classList.remove('spinning');
                console.log('[Pixel Office] Data refreshed');
            }, 1000);
        }

        // Canvas Setup
        const canvas = document.getElementById('pixelCanvas');
        const ctx = canvas.getContext('2d');
        
        // Set canvas size
        function resizeCanvas() {
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
            drawOffice();
        }

        // Draw Pixel Office
        function drawOffice() {
            const w = canvas.width;
            const h = canvas.height;
            
            // Clear canvas
            ctx.fillStyle = '#1a1a2e';
            ctx.fillRect(0, 0, w, h);
            
            // Draw grid floor (isometric style)
            ctx.strokeStyle = 'rgba(0,212,255,0.1)';
            ctx.lineWidth = 1;
            
            for (let i = 0; i < w; i += 40) {
                ctx.beginPath();
                ctx.moveTo(i, 0);
                ctx.lineTo(i, h);
                ctx.stroke();
            }
            for (let i = 0; i < h; i += 40) {
                ctx.beginPath();
                ctx.moveTo(0, i);
                ctx.lineTo(w, i);
                ctx.stroke();
            }
            
            // Draw agents as pixel sprites
            agents.forEach((agent, index) => {
                const x = 50 + (index % 7) * (w / 7);
                const y = 80 + Math.floor(index / 7) * 120;
                
                // Draw agent sprite (simplified pixel representation)
                ctx.fillStyle = agent.level === 'commander' ? '#ffd700' : 
                               agent.level === 'lead' ? '#00d4ff' :
                               agent.level === 'specialist' ? '#9c27b0' : '#4caf50';
                
                // Body
                ctx.fillRect(x, y, 24, 32);
                
                // Head
                ctx.fillStyle = '#ffdbac';
                ctx.fillRect(x + 4, y - 12, 16, 16);
                
                // Activity bar above agent
                ctx.fillStyle = '#333';
                ctx.fillRect(x - 4, y - 20, 32, 4);
                ctx.fillStyle = agent.activity > 80 ? '#00ff88' : 
                               agent.activity > 50 ? '#ffc107' : '#9e9e9e';
                ctx.fillRect(x - 4, y - 20, 32 * (agent.activity / 100), 4);
                
                // Agent label
                ctx.fillStyle = '#fff';
                ctx.font = '10px Inter';
                ctx.textAlign = 'center';
                ctx.fillText(agent.name, x + 12, y + 48);
            });
            
            // Draw title
            ctx.fillStyle = '#00d4ff';
            ctx.font = 'bold 16px "Press Start 2P"';
            ctx.textAlign = 'center';
            ctx.fillText('MISSION CONTROL HQ', w / 2, 30);
            
            ctx.font = '12px Inter';
            ctx.fillStyle = '#888';
            ctx.fillText('22 Agents Active', w / 2, 50);
        }

        // Initialize
        window.addEventListener('resize', resizeCanvas);
        window.addEventListener('load', () => {
            resizeCanvas();
            populateHierarchy();
        });

        // Auto-refresh every 30 minutes
        setInterval(() => {
            console.log('[Auto-Refresh] Reloading pixel office data...');
            refreshData();
        }, 30 * 60 * 1000);
    </script>
</body>
</html>
