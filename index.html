<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
<meta name="description" content="Mission Control HQ - AI Team Dashboard">
<meta name="theme-color" content="#2d1b4e">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<title>Mission Control HQ | AI Team Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=VT323&display=swap" rel="stylesheet">
<style>
:root{--bg-primary:#f5e6c8;--bg-secondary:#e8d4a8;--panel-bg:#f4e4c1;--panel-border:#8b7355;--panel-shadow:#5c4a3a;--text-dark:#2c1810;--text-light:#f4e4c1;--accent-cyan:#00d4ff;--accent-pink:#ff6b6b;--accent-green:#51cf66;--accent-blue:#339af0;--accent-yellow:#fcc419;--accent-purple:#da77f2;--accent-orange:#ff8787}
*{margin:0;padding:0;box-sizing:border-box;image-rendering:pixelated}
body{font-family:'VT323',monospace;background:var(--bg-primary);color:var(--text-dark);min-height:100vh;line-height:1.4}
body::before{content:'';position:fixed;top:0;left:0;width:100%;height:100%;background-image:repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(0,0,0,0.05) 2px,rgba(0,0,0,0.05) 4px),repeating-linear-gradient(90deg,transparent,transparent 2px,rgba(0,0,0,0.05) 2px,rgba(0,0,0,0.05) 4px);pointer-events:none;z-index:0}
.game-container{position:relative;z-index:1;max-width:1600px;margin:0 auto;padding:15px;min-height:100vh;padding-bottom:100px}
.game-header{background:var(--bg-secondary);border:4px solid var(--panel-border);padding:15px 20px;margin-bottom:15px;box-shadow:4px 4px 0 var(--panel-shadow);display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:15px}
.game-title{font-family:'Press Start 2P',cursive;font-size:clamp(0.6rem,2vw,0.85rem);color:var(--text-dark);letter-spacing:2px;line-height:1.6}
.game-stats{display:flex;gap:10px;flex-wrap:wrap}
.stat-box{background:var(--panel-bg);border:3px solid var(--panel-border);padding:8px 12px;min-width:70px;text-align:center;box-shadow:3px 3px 0 var(--panel-shadow)}
.stat-label{color:#8b7355;font-size:0.7rem}
.stat-value{color:var(--text-dark);font-family:'Press Start 2P',cursive;font-size:0.75rem}
.nav-tabs{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:15px}
.nav-tab,.nav-btn{font-family:'Press Start 2P',cursive;font-size:12px;padding:8px 16px;background:#f5e6c8;border:4px solid #8b7355;cursor:pointer;box-shadow:4px 4px 0 #8b7355;transition:all 0.1s;color:var(--text-dark);line-height:1.4;text-decoration:none;display:inline-flex;align-items:center;gap:6px}
.nav-tab:hover,.nav-btn:hover{border-color:#00d4ff;transform:translateY(-2px);box-shadow:4px 6px 0 #8b7355}
.nav-tab:active,.nav-btn:active{transform:translateY(0);box-shadow:0 0 0 #8b7355}
.nav-tab.active,.nav-btn.active{background:#e8d4a8;border-color:#8b7355}
.panel-box{background:var(--panel-bg);border:4px solid var(--panel-border);padding:15px;box-shadow:4px 4px 0 var(--panel-shadow),inset 0 2px 0 rgba(255,255,255,0.5);margin-bottom:15px}
.panel-title{font-family:'Press Start 2P',cursive;font-size:0.65rem;color:var(--panel-border);margin-bottom:12px;padding-bottom:10px;border-bottom:3px solid var(--panel-border);line-height:1.6;display:flex;align-items:center;gap:8px}
.main-grid{display:grid;grid-template-columns:2fr 1fr;gap:15px}
.agent-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:1rem}
.agent-card{background:linear-gradient(180deg,#fff 0%,#f0e6d3 100%);border:4px solid var(--panel-border);padding:1.25rem;box-shadow:4px 4px 0 var(--panel-shadow);transition:all 0.2s}
.agent-card:hover{transform:translateY(-3px);box-shadow:6px 6px 0 var(--panel-shadow)}
.agent-header{display:flex;align-items:center;gap:0.75rem;margin-bottom:0.75rem}
.agent-avatar{width:48px;height:48px;border:3px solid var(--panel-border);display:flex;align-items:center;justify-content:center;font-size:1.5rem;background:var(--bg-secondary);box-shadow:2px 2px 0 var(--panel-shadow)}
.agent-info{flex:1}
.agent-name{font-family:'Press Start 2P',cursive;font-size:0.65rem;color:var(--text-dark);margin-bottom:0.25rem;line-height:1.4}
.agent-role{font-size:0.9rem;color:#8b7355}
.agent-status{display:inline-block;padding:0.25rem 0.5rem;border:2px solid;font-size:0.55rem;font-family:'Press Start 2P',cursive;text-transform:uppercase}
.agent-status.active{background:rgba(81,207,102,0.2);color:#2b8a3e;border-color:#51cf66}
.agent-status.busy{background:rgba(252,196,25,0.2);color:#e67700;border-color:#fcc419}
.agent-status.idle{background:rgba(134,142,153,0.2);color:#495057;border-color:#adb5bd}
.agent-status.offline{background:rgba(255,107,107,0.2);color:#c92a2a;border-color:#ff6b6b}
.agent-stats{display:grid;grid-template-columns:repeat(3,1fr);gap:0.5rem;margin-top:0.75rem;padding-top:0.75rem;border-top:3px dashed var(--panel-border)}
.agent-stat{text-align:center}
.agent-stat-value{font-family:'Press Start 2P',cursive;font-size:0.75rem;color:var(--text-dark)}
.agent-stat-label{font-size:0.7rem;color:#8b7355;text-transform:uppercase;margin-top:4px}
.agent-productivity{margin-top:0.75rem}
.productivity-row{display:flex;justify-content:space-between;font-size:0.85rem;margin-bottom:4px}
.success-rate-bar{width:100%;height:16px;background:#ddd;border:2px solid var(--text-dark);overflow:hidden;position:relative}
.success-fill{height:100%;transition:width 0.5s ease}
.success-fill.excellent{background:linear-gradient(90deg,#51cf66,#2b8a3e)}
.success-fill.good{background:linear-gradient(90deg,#fcc419,#f59f00)}
.success-fill.average{background:linear-gradient(90deg,#ff8787,#fa5252)}
.success-fill.poor{background:linear-gradient(90deg,#adb5bd,#868e96)}
.success-text{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-family:'Press Start 2P',cursive;font-size:0.45rem;color:var(--text-dark);text-shadow:1px 1px 0 rgba(255,255,255,0.7)}
.last-active{margin-top:0.5rem;font-size:0.8rem;color:#8b7355}
.last-active .time{color:var(--text-dark);font-weight:bold}
.filter-bar{display:flex;gap:10px;margin-bottom:15px;flex-wrap:wrap}
.filter-btn{padding:6px 12px;background:rgba(255,255,255,0.5);border:2px solid var(--panel-border);font-family:'VT323',monospace;font-size:0.9rem;cursor:pointer;transition:all 0.2s}
.filter-btn:hover,.filter-btn.active{background:var(--panel-border);color:var(--panel-bg)}
.system-stats-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
.system-stat{text-align:center;padding:10px;background:rgba(255,255,255,0.3);border:2px solid var(--panel-border)}
.system-stat-value{font-family:'Press Start 2P',cursive;font-size:0.85rem;display:block;margin-bottom:4px}
.system-stat-label{font-size:0.75rem;color:#8b7355}
.token-bar{width:100%;height:24px;background:#ddd;border:2px solid var(--text-dark);overflow:hidden;position:relative}
.token-fill{height:100%;background:linear-gradient(90deg,#fcc419,#f59f00);transition:width 0.5s ease}
.token-text{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-family:'Press Start 2P',cursive;font-size:0.5rem;color:var(--text-dark)}
.activity-list{display:flex;flex-direction:column;gap:0.75rem;max-height:500px;overflow-y:auto}
.activity-item{display:flex;gap:0.75rem;padding:0.75rem;background:rgba(255,255,255,0.3);border:2px solid var(--panel-border);border-left:4px solid var(--activity-color,var(--accent-cyan))}
.activity-icon{width:40px;height:40px;background:var(--bg-secondary);border:2px solid var(--panel-border);display:flex;align-items:center;justify-content:center;font-size:1.25rem;flex-shrink:0;box-shadow:2px 2px 0 var(--panel-shadow)}
.activity-content{flex:1}
.activity-text{font-size:0.9rem;margin-bottom:0.25rem;line-height:1.4}
.activity-time{font-size:0.75rem;color:#8b7355}
.mobile-nav{display:none;position:fixed;bottom:0;left:0;right:0;background:var(--bg-secondary);border-top:4px solid var(--panel-border);padding:10px;z-index:101;justify-content:space-around}
.mobile-nav-btn{padding:10px 14px;background:var(--panel-bg);border:3px solid var(--panel-border);font-family:'Press Start 2P',cursive;font-size:0.5rem;color:var(--text-dark);cursor:pointer;text-decoration:none;text-align:center;line-height:1.4;box-shadow:0 3px 0 var(--panel-shadow)}
.loading-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:var(--bg-primary);display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:1000;transition:opacity 0.3s}
.loading-overlay.hidden{opacity:0;pointer-events:none}
.pixel-spinner{width:48px;height:48px;background:var(--panel-border);animation:pixelSpin 1s steps(4) infinite}
@keyframes pixelSpin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
.loading-text{font-family:'Press Start 2P',cursive;font-size:0.75rem;margin-top:20px;color:var(--panel-border)}
.error-state{text-align:center;padding:2rem;color:var(--accent-pink)}
.error-state h3{font-family:'Press Start 2P',cursive;font-size:0.8rem;margin-bottom:1rem}
.retry-btn{padding:10px 20px;background:var(--accent-green);border:3px solid var(--text-dark);font-family:'Press Start 2P',cursive;font-size:0.6rem;cursor:pointer;margin-top:1rem}
.skeleton{background:linear-gradient(90deg,#e8d4a8 25%,#f5e6c8 50%,#e8d4a8 75%);background-size:200% 100%;animation:shimmer 1.5s infinite}
@keyframes shimmer{0%{background-position:200% 0}100%{background-position:-200% 0}}
::-webkit-scrollbar{width:10px}
::-webkit-scrollbar-track{background:var(--panel-bg)}
::-webkit-scrollbar-thumb{background:var(--panel-border);border:2px solid var(--panel-bg)}
@media(max-width:1024px){.main-grid{grid-template-columns:1fr}}
@media(max-width:768px){.game-container{padding:10px;padding-bottom:90px}.game-title{font-size:0.5rem}.nav-tabs{display:none}.mobile-nav{display:flex}.agent-grid{grid-template-columns:1fr}.system-stats-grid{grid-template-columns:repeat(2,1fr)}}
</style>
</head>
<body>
<div class="loading-overlay" id="loader"><div class="pixel-spinner"></div><div class="loading-text">LOADING MISSION CONTROL...</div></div>
<div class="game-container">
<header class="game-header">
<div class="game-title">‚óà MISSION CONTROL HQ</div>
<div class="game-stats" id="headerStats">
<div class="stat-box"><div class="stat-label">AGENTS</div><div class="stat-value" style="color:#51cf66">--</div></div>
<div class="stat-box"><div class="stat-label">ACTIVE</div><div class="stat-value" style="color:#339af0">--</div></div>
<div class="stat-box"><div class="stat-label">TASKS</div><div class="stat-value" style="color:#fcc419">--</div></div>
<div class="stat-box"><div class="stat-label">TOKENS</div><div class="stat-value" style="color:#ff6b6b">--</div></div>
</div>
</header>
<nav class="nav-tabs">
<a href="index.html" class="nav-tab active">üè† HQ</a>
<a href="office.html" class="nav-tab">üè¢ Office</a>
<a href="pixel-office.html" class="nav-tab">üéÆ Pixel</a>
<a href="agents.html" class="nav-tab">üë• Agents</a>
<a href="dealflow-view.html" class="nav-tab">üíº Deals</a>
<a href="token-tracker.html" class="nav-tab">ü™ô Tokens</a>
<a href="task-board.html" class="nav-tab">üìã Tasks</a>
<a href="data-viewer.html" class="nav-tab">üìÅ Data</a>
</nav>
<div class="main-grid">
<div class="left-column">
<div class="panel-box">
<div class="panel-title"><span class="emoji">ü§ñ</span>AGENT ROSTER (<span id="agentCount">--</span>)</div>
<div class="filter-bar">
<button class="filter-btn active" onclick="filterAgents('all')">All</button>
<button class="filter-btn" onclick="filterAgents('active')">Active</button>
<button class="filter-btn" onclick="filterAgents('busy')">Busy</button>
<button class="filter-btn" onclick="filterAgents('idle')">Idle</button>
<button class="filter-btn" onclick="filterAgents('offline')">Offline</button>
</div>
<div class="agent-grid" id="agentGrid">
<div class="agent-card skeleton" style="height:200px"></div>
<div class="agent-card skeleton" style="height:200px"></div>
<div class="agent-card skeleton" style="height:200px"></div>
</div>
</div>
<div class="panel-box">
<div class="panel-title"><span class="emoji">üìà</span>SYSTEM STATISTICS</div>
<div class="system-stats-grid" id="systemStats">
<div class="system-stat skeleton" style="height:60px"></div>
<div class="system-stat skeleton" style="height:60px"></div>
<div class="system-stat skeleton" style="height:60px"></div>
<div class="system-stat skeleton" style="height:60px"></div>
<div class="system-stat skeleton" style="height:60px"></div>
<div class="system-stat skeleton" style="height:60px"></div>
</div>
<div style="margin-top:15px">
<div style="font-size:0.8rem;color:#666;margin-bottom:5px">Daily Token Usage</div>
<div class="token-bar"><div class="token-fill" id="tokenFill" style="width:0%"></div><div class="token-text" id="tokenText">Loading...</div></div>
</div>
</div>
</div>
<div class="right-column">
<div class="panel-box">
<div class="panel-title"><span class="emoji">üì°</span>RECENT ACTIVITY</div>
<div class="activity-list" id="activityList">
<div class="activity-item skeleton" style="height:60px"></div>
<div class="activity-item skeleton" style="height:60px"></div>
<div class="activity-item skeleton" style="height:60px"></div>
</div>
</div>
<div class="panel-box">
<div class="panel-title"><span class="emoji">‚ö°</span>QUICK ACTIONS</div>
<div style="display:grid;grid-template-columns:1fr 1fr;gap:10px">
<button class="nav-btn" id="refreshBtn" style="width:100%;justify-content:center" onclick="refreshData()"><span id="refreshText">üîÑ REFRESH</span></button>
<button class="nav-btn" style="width:100%;justify-content:center" onclick="location.href='task-board.html'">‚úì TASK</button>
<button class="nav-btn" style="width:100%;justify-content:center" onclick="location.href='dealflow-view.html'">ü§ù LEAD</button>
<button class="nav-btn" style="width:100%;justify-content:center" onclick="location.href='office.html'">üè¢ OFFICE</button>
</div>
</div>
</div>
</div>
</div>
<nav class="mobile-nav">
<a href="index.html" class="mobile-nav-btn" style="background:#69db7c">üè†<br>HQ</a>
<a href="office.html" class="mobile-nav-btn">üè¢<br>Office</a>
<a href="agents.html" class="mobile-nav-btn">üë•<br>Agents</a>
<a href="dealflow-view.html" class="mobile-nav-btn">üíº<br>Deals</a>
</nav>
<script>
const API_BASE='/api';
let agentsData=[],currentFilter='all';
function formatNumber(n){return n>=1e6?(n/1e6).toFixed(1)+'M':n>=1e3?(n/1e3).toFixed(1)+'K':n.toString()}
async function fetchAgents(){const r=await fetch(`${API_BASE}/agents`);if(!r.ok)throw new Error('Failed to fetch agents');return r.json()}
async function fetchStats(){const r=await fetch(`${API_BASE}/stats`);if(!r.ok)throw new Error('Failed to fetch stats');return r.json()}
async function fetchActivity(){const r=await fetch(`${API_BASE}/logs-activity?limit=20`);if(!r.ok)throw new Error('Failed to fetch activity');return r.json()}
function updateHeaderStats(agents,stats){const totalTokens=agents.reduce((s,a)=>s+(a.tokensUsed||0),0);document.getElementById('headerStats').innerHTML=`<div class="stat-box"><div class="stat-label">AGENTS</div><div class="stat-value" style="color:#51cf66">${agents.length}</div></div><div class="stat-box"><div class="stat-label">ACTIVE</div><div class="stat-value" style="color:#339af0">${agents.filter(a=>a.status==='active').length}</div></div><div class="stat-box"><div class="stat-label">TASKS</div><div class="stat-value" style="color:#fcc419">${stats?.stats?.tasks?.total||'--'}</div></div><div class="stat-box"><div class="stat-label">TOKENS</div><div class="stat-value" style="color:#ff6b6b">${formatNumber(totalTokens)}</div></div>`}
function renderAgents(agents,filter='all'){const grid=document.getElementById('agentGrid'),filtered=filter==='all'?agents:agents.filter(a=>a.status===filter);document.getElementById('agentCount').textContent=filtered.length;if(filtered.length===0){grid.innerHTML='<div style="text-align:center;padding:2rem;color:#8b7355">No agents found</div>';return}grid.innerHTML=filtered.map(agent=>{const successRate=agent.successRate||90,successClass=successRate>=95?'excellent':successRate>=90?'good':successRate>=80?'average':'poor',tokens=agent.tokensUsed||0,tasks=agent.tasksCompleted||0,files=agent.files||Math.floor(tasks*1.5),activities=agent.activities||Math.floor(tasks*0.3);return`<div class="agent-card" data-status="${agent.status}"><div class="agent-header"><div class="agent-avatar" style="background:${agent.color||'#8b7355'}20;color:${agent.color||'#8b7355'}">${agent.emoji||'ü§ñ'}</div><div class="agent-info"><div class="agent-name">${agent.name}</div><div class="agent-role">${agent.role}</div></div><span class="agent-status ${agent.status}">${agent.status.toUpperCase()}</span></div><div class="agent-stats"><div class="agent-stat"><span class="agent-stat-value">${formatNumber(tokens)}</span><span class="agent-stat-label">tokens</span></div><div class="agent-stat"><span class="agent-stat-value">${files}</span><span class="agent-stat-label">files</span></div><div class="agent-stat"><span class="agent-stat-value">${tasks}</span><span class="agent-stat-label">tasks</span></div></div><div class="agent-productivity"><div class="productivity-row"><span>Activities:</span><span>${activities}</span></div><div class="productivity-row"><span>Success Rate:</span></div><div class="success-rate-bar"><div class="success-fill ${successClass}" style="width:${successRate}%"></div><div class="success-text">${successRate}%</div></div></div><div class="last-active">Last active: <span class="time">${formatLastActive(agent.lastActive)}</span></div></div>`}).join('')}
function formatLastActive(ts){if(!ts)return'Unknown';const d=new Date(ts),now=new Date(),diff=Math.floor((now-d)/1000/60);if(diff<1)return'Just now';if(diff<60)return`${diff} min ago`;if(diff<1440)return`${Math.floor(diff/60)} hours ago`;return`${Math.floor(diff/1440)} days ago`}
function filterAgents(status){currentFilter=status;document.querySelectorAll('.filter-btn').forEach(btn=>{btn.classList.remove('active');if(btn.textContent.toLowerCase()===status||status==='all'&&btn.textContent==='All')btn.classList.add('active')});renderAgents(agentsData,status)}
function renderSystemStats(stats){const s=stats.stats;document.getElementById('systemStats').innerHTML=`<div class="system-stat"><span class="system-stat-value" style="color:#339af0">${formatNumber(s.tokens.total)}</span><span class="system-stat-label">Total Tokens</span></div><div class="system-stat"><span class="system-stat-value" style="color:#51cf66">$${s.tokens.cost}</span><span class="system-stat-label">Total Cost</span></div><div class="system-stat"><span class="system-stat-value" style="color:#ff6b6b">${s.tokens.sessions}</span><span class="system-stat-label">Sessions</span></div><div class="system-stat"><span class="system-stat-value" style="color:#fcc419">${s.tasks.total}</span><span class="system-stat-label">Total Tasks</span></div><div class="system-stat"><span class="system-stat-value" style="color:#da77f2">${s.agents.active}</span><span class="system-stat-label">Active Agents</span></div><div class="system-stat"><span class="system-stat-value" style="color:#69db7c">${s.deployments.total}</span><span class="system-stat-label">Deployments</span></div><div class="system-stat"><span class="system-stat-value" style="color:#4dabf7">${s.tasks.completed}</span><span class="system-stat-label">Completed</span></div><div class="system-stat"><span class="system-stat-value" style="color:#ff8787">${s.uptime}</span><span class="system-stat-label">Uptime</span></div><div class="system-stat"><span class="system-stat-value" style="color:#20c997">${s.tasks.inProgress}</span><span class="system-stat-label">In Progress</span></div>`;const dailyPercent=Math.min(100,(s.tokens.total/1e6)*100);document.getElementById('tokenFill').style.width=`${dailyPercent}%`;document.getElementById('tokenText').textContent=`${formatNumber(s.tokens.total)}/1M (${Math.round(dailyPercent)}%)`}
function renderActivity(activities){const list=document.getElementById('activityList');if(!activities||activities.length===0){list.innerHTML='<div style="text-align:center;padding:2rem;color:#8b7355">No recent activity</div>';return}const typeColors={task_complete:'#51cf66',task_active:'#339af0',system:'#fcc419',audit:'#da77f2',idle:'#adb5bd'},typeIcons={task_complete:'‚úÖ',task_active:'üîß',system:'‚öôÔ∏è',audit:'üîç',idle:'‚è∏Ô∏è'};list.innerHTML=activities.map(a=>{const color=typeColors[a.type]||'#00d4ff',icon=typeIcons[a.type]||'üìã';return`<div class="activity-item" style="--activity-color:${color}"><div class="activity-icon" style="background:${color}20">${icon}</div><div class="activity-content"><div class="activity-text"><strong>${a.agent}</strong> ${a.message}</div><div class="activity-time">${formatLastActive(a.timestamp)}</div></div></div>`}).join('')}
function showError(msg){document.getElementById('agentGrid').innerHTML=`<div class="error-state" style="grid-column:1/-1"><h3>‚ö†Ô∏è ERROR LOADING DATA</h3><p>${msg}</p><button class="retry-btn" onclick="refreshData()">üîÑ RETRY</button></div>`}
async function refreshData(){const refreshBtn=document.getElementById('refreshBtn'),refreshText=document.getElementById('refreshText');refreshBtn.disabled=true;refreshText.textContent='‚è≥ LOADING...';try{const[agentsRes,statsRes,activityRes]=await Promise.all([fetchAgents(),fetchStats(),fetchActivity()]);agentsData=agentsRes.agents||[];updateHeaderStats(agentsData,statsRes);renderAgents(agentsData,currentFilter);renderSystemStats(statsRes);renderActivity(activityRes.logs||[]);refreshText.textContent='‚úÖ DONE!';setTimeout(()=>refreshText.textContent='üîÑ REFRESH',1500)}catch(e){showError(e.message);refreshText.textContent='‚ùå ERROR';setTimeout(()=>refreshText.textContent='üîÑ REFRESH',2000)}finally{refreshBtn.disabled=false}}
document.addEventListener('DOMContentLoaded',()=>{refreshData();setInterval(()=>{console.log('[Auto-Refresh] Reloading data...');refreshData()},30*60*1000)});
</script>
</body>
</html>