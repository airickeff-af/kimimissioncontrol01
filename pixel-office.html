<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="description" content="Pixel Office - Mission Control">
    <meta name="theme-color" content="#2d1b4e">
    <title>üè¢ Pixel Office | Mission Control</title>
    
    <!-- Kairosoft Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=VT323&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg-primary: #f5e6c8;
            --bg-secondary: #e8d4a8;
            --bg-card: #fff8e7;
            --panel-bg: #f4e4c1;
            --panel-border: #8b7355;
            --panel-shadow: #5c4a3a;
            --text-dark: #2c1810;
            --text-light: #f4e4c1;
            --accent-cyan: #00d4ff;
            --accent-pink: #ff6b6b;
            --accent-green: #51cf66;
            --accent-blue: #339af0;
            --accent-yellow: #fcc419;
            --accent-purple: #da77f2;
            --accent-orange: #ff8787;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; image-rendering: pixelated; }
        
        body {
            font-family: 'VT323', monospace;
            background: var(--bg-primary);
            color: var(--text-dark);
            min-height: 100vh;
            line-height: 1.4;
        }
        
        /* Pixel Grid Background */
        body::before {
            content: '';
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background-image: 
                linear-gradient(rgba(0, 212, 255, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 212, 255, 0.03) 1px, transparent 1px);
            background-size: 60px 60px;
            pointer-events: none;
            z-index: 0;
        }
        
        /* Header - Matching Mission Control */
        .header {
            background: var(--bg-secondary);
            border-bottom: 4px solid var(--panel-border);
            box-shadow: 0 4px 0 var(--panel-shadow);
            padding: 0 2rem;
            height: 70px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .brand {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .logo {
            width: 42px;
            height: 42px;
            background: var(--panel-border);
            border: 3px solid var(--text-dark);
            box-shadow: 3px 3px 0 var(--text-dark);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }
        
        .brand-text h1 {
            font-family: 'Press Start 2P', cursive;
            font-size: 0.75rem;
            font-weight: 700;
            letter-spacing: -0.02em;
            line-height: 1.5;
        }
        
        .brand-text span {
            font-size: 0.7rem;
            color: var(--text-secondary);
        }
        
        /* Navigation Tabs */
        .nav-tabs {
            display: flex;
            gap: 0.5rem;
            max-width: 600px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .nav-tab {
            padding: 8px 12px;
            background: var(--bg-card);
            border: 3px solid var(--panel-border);
            border-radius: 6px;
            font-family: 'Press Start 2P', cursive;
            font-size: 0.5rem;
            color: var(--text-dark);
            text-decoration: none;
            text-align: center;
            line-height: 1.4;
            box-shadow: 0 3px 0 var(--panel-shadow);
            transition: all 0.1s;
        }
        
        .nav-tab:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 0 var(--panel-shadow);
        }
        
        .nav-tab.active {
            background: var(--accent-green);
            border-color: var(--accent-green);
            color: white;
        }
        
        /* Main Container */
        .container {
            position: relative;
            z-index: 1;
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 20px;
        }
        
        /* Canvas Area */
        .canvas-area {
            background: var(--bg-card);
            border: 4px solid var(--panel-border);
            box-shadow: 4px 4px 0 var(--panel-shadow);
            border-radius: 8px;
            padding: 15px;
        }
        
        .canvas-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--panel-border);
        }
        
        .canvas-title {
            font-family: 'Press Start 2P', cursive;
            font-size: 0.65rem;
            color: var(--panel-border);
        }
        
        .action-btns {
            display: flex;
            gap: 10px;
        }
        
        .btn {
            padding: 8px 16px;
            background: var(--bg-secondary);
            border: 3px solid var(--panel-border);
            border-radius: 6px;
            font-family: 'Press Start 2P', cursive;
            font-size: 0.5rem;
            color: var(--text-dark);
            cursor: pointer;
            box-shadow: 0 3px 0 var(--panel-shadow);
            transition: all 0.1s;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 0 var(--panel-shadow);
        }
        
        .btn:active {
            transform: translateY(0);
            box-shadow: 0 1px 0 var(--panel-shadow);
        }
        
        .btn-primary {
            background: var(--accent-green);
            border-color: var(--accent-green);
            color: white;
        }
        
        #officeCanvas {
            width: 100%;
            height: 500px;
            background: #2d3436;
            border: 3px solid var(--panel-border);
            border-radius: 4px;
            cursor: crosshair;
        }
        
        /* Sidebar */
        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .panel {
            background: var(--bg-card);
            border: 4px solid var(--panel-border);
            box-shadow: 4px 4px 0 var(--panel-shadow);
            border-radius: 8px;
            padding: 15px;
        }
        
        .panel-title {
            font-family: 'Press Start 2P', cursive;
            font-size: 0.6rem;
            color: var(--panel-border);
            margin-bottom: 10px;
            padding-bottom: 8px;
            border-bottom: 2px solid var(--panel-border);
        }
        
        /* Activity Log */
        .activity-log {
            max-height: 200px;
            overflow-y: auto;
            font-size: 0.9rem;
        }
        
        .activity-item {
            padding: 8px;
            margin-bottom: 5px;
            background: var(--bg-secondary);
            border-left: 3px solid var(--accent-cyan);
            border-radius: 0 4px 4px 0;
        }
        
        .activity-item.agent {
            border-left-color: var(--accent-green);
        }
        
        .activity-item.system {
            border-left-color: var(--accent-pink);
        }
        
        .activity-time {
            font-size: 0.75rem;
            color: var(--text-secondary);
        }
        
        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }
        
        .stat-box {
            background: var(--bg-secondary);
            border: 2px solid var(--panel-border);
            border-radius: 6px;
            padding: 10px;
            text-align: center;
        }
        
        .stat-value {
            font-family: 'Press Start 2P', cursive;
            font-size: 1rem;
            color: var(--accent-green);
        }
        
        .stat-label {
            font-size: 0.75rem;
            color: var(--text-secondary);
            margin-top: 5px;
        }
        
        /* Agent List */
        .agent-list {
            max-height: 300px;
            overflow-y: auto;
        }
        
        .agent-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px;
            margin-bottom: 5px;
            background: var(--bg-secondary);
            border: 2px solid var(--panel-border);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .agent-item:hover {
            transform: translateX(5px);
            border-color: var(--accent-cyan);
        }
        
        .agent-emoji {
            font-size: 1.5rem;
        }
        
        .agent-info {
            flex: 1;
        }
        
        .agent-name {
            font-weight: bold;
            font-size: 1rem;
        }
        
        .agent-role {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }
        
        .agent-status {
            width: 10px;
            height: 10px;
            border-radius: 50%;
        }
        
        .status-active { background: var(--accent-green); }
        .status-busy { background: var(--accent-yellow); }
        .status-idle { background: var(--accent-pink); }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal.active { display: flex; }
        
        .modal-content {
            background: var(--bg-card);
            border: 4px solid var(--panel-border);
            box-shadow: 8px 8px 0 var(--panel-shadow);
            border-radius: 8px;
            padding: 20px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 3px solid var(--panel-border);
        }
        
        .modal-title {
            font-family: 'Press Start 2P', cursive;
            font-size: 0.7rem;
            color: var(--panel-border);
        }
        
        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-dark);
        }
        
        /* Responsive */
        @media (max-width: 1024px) {
            .container { grid-template-columns: 1fr; }
            .nav-tabs { display: none; }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="brand">
            <div class="logo">üè¢</div>
            <div class="brand-text">
                <h1>Pixel Office</h1>
                <span>22 Agents ‚Ä¢ Live View</span>
            </div>
        </div>
        
        <nav class="nav-tabs">
            <a href="index.html" class="nav-tab">üè† HQ</a>
            <a href="office.html" class="nav-tab">üè¢ Office</a>
            <a href="pixel-office.html" class="nav-tab active">üéÆ Pixel</a>
            <a href="agents.html" class="nav-tab">üë• Agents</a>
            <a href="dealflow-view.html" class="nav-tab">üíº Deals</a>
            <a href="token-tracker.html" class="nav-tab">ü™ô Tokens</a>
            <a href="task-board.html" class="nav-tab">üìã Tasks</a>
            <a href="data-viewer.html" class="nav-tab">üìÅ Data</a>
        </nav>
    </header>
    
    <!-- Main Container -->
    <div class="container">
        <!-- Canvas Area -->
        <div class="canvas-area">
            <div class="canvas-header">
                <span class="canvas-title">üéÆ PIXEL OFFICE - 22 AGENTS</span>
                <div class="action-btns">
                    <button class="btn btn-primary" onclick="startStandup()">üì¢ STANDUP</button>
                    <button class="btn" onclick="resetOffice()">üîÑ RESET</button>
                </div>
            </div>
            <canvas id="officeCanvas"></canvas>
        </div>
        
        <!-- Sidebar -->
        <div class="sidebar">
            <!-- Stats Panel -->
            <div class="panel">
                <div class="panel-title">üìä OFFICE STATS</div>
                <div class="stats-grid">
                    <div class="stat-box">
                        <div class="stat-value" id="activeCount">22</div>
                        <div class="stat-label">Active</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="workingCount">12</div>
                        <div class="stat-label">Working</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="meetingCount">0</div>
                        <div class="stat-label">In Meeting</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="standupCount">0</div>
                        <div class="stat-label">Standup</div>
                    </div>
                </div>
            </div>
            
            <!-- Activity Log -->
            <div class="panel">
                <div class="panel-title">üì° ACTIVITY LOG</div>
                <div class="activity-log" id="activityLog">
                    <div class="activity-item system">
                        <span class="activity-time">23:00</span>
                        üéÆ Pixel Office initialized with 22 agents
                    </div>
                </div>
            </div>
            
            <!-- Agent List -->
            <div class="panel">
                <div class="panel-title">üë• AGENT ROSTER (22)</div>
                <div class="agent-list" id="agentList">
                    <!-- Populated by JavaScript -->
                </div>
            </div>
        </div>
    </div>
    
    <!-- Agent Detail Modal -->
    <div class="modal" id="agentModal">
        <div class="modal-content">
            <div class="modal-header">
                <span class="modal-title" id="modalAgentName">AGENT PROFILE</span>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div id="modalAgentContent">
                <!-- Populated by JavaScript -->
            </div>
        </div>
    </div>

    <script>
        // ============================================
        // MISSION CONTROL - 22 AGENTS DATA
        // ============================================
        
        const AGENTS_DATA = [
            { id: 'ericf', name: 'EricF', role: 'Commander', emoji: 'üëë', color: '#ffd700', status: 'active', tasks: 0, tokens: 0 },
            { id: 'nexus', name: 'Nexus', role: 'Orchestrator', emoji: 'ü§ñ', color: '#00d4ff', status: 'active', tasks: 45, tokens: 8400000 },
            { id: 'codemaster', name: 'CodeMaster', role: 'Backend Lead', emoji: 'üíª', color: '#22c55e', status: 'busy', tasks: 35, tokens: 1200000 },
            { id: 'code-1', name: 'Code-1', role: 'Backend Engineer', emoji: '‚ö°', color: '#22c55e', status: 'busy', tasks: 29, tokens: 880000 },
            { id: 'code-2', name: 'Code-2', role: 'Backend Engineer', emoji: 'üîß', color: '#22c55e', status: 'busy', tasks: 12, tokens: 450000 },
            { id: 'code-3', name: 'Code-3', role: 'Backend Engineer', emoji: 'üîå', color: '#22c55e', status: 'busy', tasks: 8, tokens: 320000 },
            { id: 'forge', name: 'Forge', role: 'UI/Frontend Lead', emoji: 'üî®', color: '#f97316', status: 'active', tasks: 38, tokens: 1350000 },
            { id: 'forge-2', name: 'Forge-2', role: 'UI/Frontend', emoji: 'üé®', color: '#f97316', status: 'active', tasks: 22, tokens: 500000 },
            { id: 'forge-3', name: 'Forge-3', role: 'UI/Frontend', emoji: '‚ú®', color: '#f97316', status: 'active', tasks: 18, tokens: 720000 },
            { id: 'pixel', name: 'Pixel', role: 'Designer', emoji: 'üé®', color: '#a855f7', status: 'active', tasks: 31, tokens: 2500000 },
            { id: 'glasses', name: 'Glasses', role: 'Researcher', emoji: 'üîç', color: '#3b82f6', status: 'active', tasks: 31, tokens: 2000000 },
            { id: 'quill', name: 'Quill', role: 'Writer', emoji: '‚úçÔ∏è', color: '#ec4899', status: 'idle', tasks: 27, tokens: 380000 },
            { id: 'gary', name: 'Gary', role: 'Marketing', emoji: 'üì¢', color: '#f59e0b', status: 'idle', tasks: 19, tokens: 340000 },
            { id: 'larry', name: 'Larry', role: 'Social Media', emoji: 'üì±', color: '#06b6d4', status: 'idle', tasks: 24, tokens: 420000 },
            { id: 'buzz', name: 'Buzz', role: 'Social Media', emoji: 'üêù', color: '#fbbf24', status: 'active', tasks: 20, tokens: 350000 },
            { id: 'sentry', name: 'Sentry', role: 'DevOps', emoji: 'üõ°Ô∏è', color: '#ef4444', status: 'active', tasks: 42, tokens: 560000 },
            { id: 'audit', name: 'Audit', role: 'QA Lead', emoji: 'üîç', color: '#8b5cf6', status: 'active', tasks: 28, tokens: 770000 },
            { id: 'cipher', name: 'Cipher', role: 'Security', emoji: 'üîê', color: '#6366f1', status: 'idle', tasks: 15, tokens: 280000 },
            { id: 'dealflow', name: 'DealFlow', role: 'Lead Gen', emoji: 'ü§ù', color: '#10b981', status: 'busy', tasks: 52, tokens: 7510000 },
            { id: 'coldcall', name: 'ColdCall', role: 'Outreach', emoji: 'üìû', color: '#f97316', status: 'idle', tasks: 8, tokens: 180000 },
            { id: 'scout', name: 'Scout', role: 'Intel', emoji: 'üî≠', color: '#00d4ff', status: 'active', tasks: 15, tokens: 80000 },
            { id: 'pie', name: 'PIE', role: 'Predictive Intelligence', emoji: 'üß†', color: '#8b5cf6', status: 'active', tasks: 18, tokens: 890000 }
        ];
        
        // ============================================
        // CANVAS SETUP
        // ============================================
        
        const canvas = document.getElementById('officeCanvas');
        const ctx = canvas.getContext('2d');
        
        // Set canvas size
        function resizeCanvas() {
            const container = canvas.parentElement;
            canvas.width = container.clientWidth - 30;
            canvas.height = 500;
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);
        
        // Agent positions (grid layout)
        let agentPositions = [];
        let isStandupActive = false;
        let standupCenter = { x: 0, y: 0 };
        
        function calculatePositions() {
            const cols = 7;
            const rows = 4;
            const padding = 80;
            const startX = padding;
            const startY = 80;
            const spacingX = (canvas.width - padding * 2) / (cols - 1);
            const spacingY = 100;
            
            agentPositions = AGENTS_DATA.map((agent, i) => {
                const col = i % cols;
                const row = Math.floor(i / cols);
                return {
                    ...agent,
                    x: startX + col * spacingX,
                    y: startY + row * spacingY,
                    originalX: startX + col * spacingX,
                    originalY: startY + row * spacingY,
                    targetX: startX + col * spacingX,
                    targetY: startY + row * spacingY,
                    animating: false
                };
            });
            
            standupCenter = { x: canvas.width / 2, y: canvas.height / 2 + 50 };
        }
        
        // ============================================
        // DRAWING FUNCTIONS
        // ============================================
        
        function drawPixelAgent(agent, x, y, scale = 1) {
            const size = 40 * scale;
            
            // Shadow
            ctx.fillStyle = 'rgba(0,0,0,0.3)';
            ctx.beginPath();
            ctx.ellipse(x, y + size/2 + 5, size/2, size/6, 0, 0, Math.PI * 2);
            ctx.fill();
            
            // Body (pixel style)
            ctx.fillStyle = agent.color;
            ctx.fillRect(x - size/2, y - size/2, size, size);
            
            // Border
            ctx.strokeStyle = '#2d3436';
            ctx.lineWidth = 3;
            ctx.strokeRect(x - size/2, y - size/2, size, size);
            
            // Emoji
            ctx.font = `${24 * scale}px Arial`;
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(agent.emoji, x, y);
            
            // Name label
            ctx.font = '10px "Press Start 2P"';
            ctx.fillStyle = '#fff';
            ctx.fillText(agent.name, x, y + size/2 + 15);
            
            // Status indicator
            const statusColors = {
                active: '#51cf66',
                busy: '#fcc419',
                idle: '#ff6b6b'
            };
            ctx.fillStyle = statusColors[agent.status] || '#888';
            ctx.beginPath();
            ctx.arc(x + size/2 - 5, y - size/2 + 5, 4, 0, Math.PI * 2);
            ctx.fill();
        }
        
        function drawOffice() {
            // Clear
            ctx.fillStyle = '#2d3436';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Grid pattern
            ctx.strokeStyle = 'rgba(255,255,255,0.05)';
            ctx.lineWidth = 1;
            for (let x = 0; x < canvas.width; x += 40) {
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, canvas.height);
                ctx.stroke();
            }
            for (let y = 0; y < canvas.height; y += 40) {
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(canvas.width, y);
                ctx.stroke();
            }
            
            // Meeting table (if standup active)
            if (isStandupActive) {
                ctx.fillStyle = 'rgba(139, 115, 85, 0.5)';
                ctx.fillRect(standupCenter.x - 60, standupCenter.y - 30, 120, 60);
                ctx.strokeStyle = '#8b7355';
                ctx.lineWidth = 3;
                ctx.strokeRect(standupCenter.x - 60, standupCenter.y - 30, 120, 60);
                
                // Meeting label
                ctx.font = '10px "Press Start 2P"';
                ctx.fillStyle = '#fff';
                ctx.textAlign = 'center';
                ctx.fillText('üì¢ STANDUP', standupCenter.x, standupCenter.y);
            }
            
            // Draw agents
            agentPositions.forEach(agent => {
                drawPixelAgent(agent, agent.x, agent.y);
            });
        }
        
        // ============================================
        // ANIMATION LOOP
        // ============================================
        
        function animate() {
            // Update agent positions (smooth movement)
            agentPositions.forEach(agent => {
                if (agent.animating) {
                    const dx = agent.targetX - agent.x;
                    const dy = agent.targetY - agent.y;
                    const speed = 0.1;
                    
                    agent.x += dx * speed;
                    agent.y += dy * speed;
                    
                    if (Math.abs(dx) < 1 && Math.abs(dy) < 1) {
                        agent.x = agent.targetX;
                        agent.y = agent.targetY;
                        agent.animating = false;
                    }
                }
            });
            
            drawOffice();
            requestAnimationFrame(animate);
        }
        
        // ============================================
        // STANDUP FUNCTION
        // ============================================
        
        function startStandup() {
            if (isStandupActive) return;
            
            isStandupActive = true;
            
            // Move all agents to meeting table
            agentPositions.forEach((agent, i) => {
                const angle = (i / agentPositions.length) * Math.PI * 2;
                const radius = 120;
                agent.targetX = standupCenter.x + Math.cos(angle) * radius;
                agent.targetY = standupCenter.y + Math.sin(angle) * radius;
                agent.animating = true;
            });
            
            addActivity('üì¢', 'Nexus', 'started daily standup', 'system');
            updateStats();
            
            // End standup after 5 seconds
            setTimeout(() => {
                endStandup();
            }, 5000);
        }
        
        function endStandup() {
            isStandupActive = false;
            
            // Return agents to original positions
            agentPositions.forEach(agent => {
                agent.targetX = agent.originalX;
                agent.targetY = agent.originalY;
                agent.animating = true;
            });
            
            addActivity('‚úÖ', 'Nexus', 'standup complete - 22 agents synced', 'system');
            updateStats();
        }
        
        function resetOffice() {
            isStandupActive = false;
            agentPositions.forEach(agent => {
                agent.targetX = agent.originalX;
                agent.targetY = agent.originalY;
                agent.animating = true;
            });
            addActivity('üîÑ', 'System', 'office reset', 'system');
            updateStats();
        }
        
        // ============================================
        // UI FUNCTIONS
        // ============================================
        
        function addActivity(emoji, agent, action, type = 'agent') {
            const log = document.getElementById('activityLog');
            const time = new Date().toLocaleTimeString('en-US', { hour12: false, hour: '2-digit', minute: '2-digit' });
            
            const item = document.createElement('div');
            item.className = `activity-item ${type}`;
            item.innerHTML = `<span class="activity-time">${time}</span> ${emoji} <strong>${agent}</strong> ${action}`;
            
            log.insertBefore(item, log.firstChild);
            
            // Keep only last 20 items
            while (log.children.length > 20) {
                log.removeChild(log.lastChild);
            }
        }
        
        function updateStats() {
            const active = agentPositions.filter(a => a.status === 'active').length;
            const busy = agentPositions.filter(a => a.status === 'busy').length;
            const idle = agentPositions.filter(a => a.status === 'idle').length;
            
            document.getElementById('activeCount').textContent = '22';
            document.getElementById('workingCount').textContent = active + busy;
            document.getElementById('meetingCount').textContent = isStandupActive ? '22' : '0';
            document.getElementById('standupCount').textContent = isStandupActive ? '1' : '0';
        }
        
        function renderAgentList() {
            const list = document.getElementById('agentList');
            
            AGENTS_DATA.forEach(agent => {
                const item = document.createElement('div');
                item.className = 'agent-item';
                item.onclick = () => showAgentModal(agent);
                
                item.innerHTML = `
                    <span class="agent-emoji">${agent.emoji}</span>
                    <div class="agent-info">
                        <div class="agent-name">${agent.name}</div>
                        <div class="agent-role">${agent.role}</div>
                    </div>
                    <div class="agent-status status-${agent.status}"></div>
                `;
                
                list.appendChild(item);
            });
        }
        
        function showAgentModal(agent) {
            document.getElementById('modalAgentName').textContent = `${agent.emoji} ${agent.name}`;
            document.getElementById('modalAgentContent').innerHTML = `
                <div style="display: grid; gap: 10px;">
                    <div style="display: flex; justify-content: space-between; padding: 10px; background: var(--bg-secondary); border-radius: 6px;">
                        <span>Role:</span>
                        <strong>${agent.role}</strong>
                    </div>
                    <div style="display: flex; justify-content: space-between; padding: 10px; background: var(--bg-secondary); border-radius: 6px;">
                        <span>Status:</span>
                        <strong style="text-transform: uppercase; color: ${agent.status === 'active' ? 'var(--accent-green)' : agent.status === 'busy' ? 'var(--accent-yellow)' : 'var(--accent-pink)'}">${agent.status}</strong>
                    </div>
                    <div style="display: flex; justify-content: space-between; padding: 10px; background: var(--bg-secondary); border-radius: 6px;">
                        <span>Tasks Completed:</span>
                        <strong>${agent.tasks}</strong>
                    </div>
                    <div style="display: flex; justify-content: space-between; padding: 10px; background: var(--bg-secondary); border-radius: 6px;">
                        <span>Tokens Used:</span>
                        <strong>${(agent.tokens / 1000).toFixed(0)}K</strong>
                    </div>
                </div>
            `;
            document.getElementById('agentModal').classList.add('active');
        }
        
        function closeModal() {
            document.getElementById('agentModal').classList.remove('active');
        }
        
        // ============================================
        // INITIALIZATION
        // ============================================
        
        window.onload = function() {
            calculatePositions();
            renderAgentList();
            updateStats();
            animate();
            
            // Add some initial activity
            setTimeout(() => addActivity('ü§ñ', 'Nexus', 'orchestrating 22 agents', 'agent'), 1000);
            setTimeout(() => addActivity('üíª', 'CodeMaster', 'fixing API endpoints', 'agent'), 2000);
            setTimeout(() => addActivity('ü§ù', 'DealFlow', 'researching Singapore leads', 'agent'), 3000);
        };
        
        // Click on canvas to select agent
        canvas.addEventListener('click', (e) => {
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            agentPositions.forEach(agent => {
                const dx = x - agent.x;
                const dy = y - agent.y;
                const dist = Math.sqrt(dx * dx + dy * dy);
                
                if (dist < 30) {
                    showAgentModal(agent);
                    addActivity(agent.emoji, agent.name, 'clicked in office', 'agent');
                }
            });
        });
    </script>
</body>
</html>
